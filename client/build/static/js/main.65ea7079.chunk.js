(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{69:function(e,t,a){},70:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(0),r=a.n(n),i=a(18),l=a.n(i),c=(a(69),a(70),a(62)),o=a(7),d=a(102),j=a(57),b=function(){return Object(s.jsx)(d.a,{children:Object(s.jsxs)("div",{className:"home-container",children:[Object(s.jsx)("h1",{className:"home-header",children:"Dogstr"}),Object(s.jsx)("h1",{className:"home-paw",children:Object(s.jsx)("i",{class:"fas fa-paw"})}),Object(s.jsx)("h4",{className:"home-prompt",children:"Create an account or login"}),Object(s.jsxs)("div",{className:"home-button-group",children:[Object(s.jsx)(j.a,{href:"/register",id:"home-register",size:"lg",block:!0,children:"Register"}),Object(s.jsx)(j.a,{href:"/login",id:"home-login",variant:"secondary",size:"lg",block:!0,children:"Login"})]})]})})},h=a(8),u=a(107);var m=function(e){var t=e.errors.map((function(e,t){return Object(s.jsx)("p",{children:e.msg},t)}));return e.errors.length>0?Object(s.jsxs)(u.a,{variant:"danger",onClose:e.clearErrors,dismissible:!0,children:[Object(s.jsx)(u.a.Heading,{children:"Whoops!"}),Object(s.jsx)("div",{children:t})]}):Object(s.jsx)(s.Fragment,{})},p=a(17),f=a.n(p),O=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),r=a[0],i=a[1],l=Object(n.useState)(""),c=Object(h.a)(l,2),j=c[0],b=c[1],u=Object(n.useState)(!1),p=Object(h.a)(u,2),O=p[0],y=p[1],g=Object(n.useState)([]),x=Object(h.a)(g,2),v=x[0],T=x[1];return O?Object(s.jsx)(o.a,{to:"/dashboard"}):Object(s.jsx)("div",{children:Object(s.jsx)(d.a,{children:Object(s.jsx)("div",{className:"row mt-5",children:Object(s.jsx)("div",{className:"col-md-6 m-auto",children:Object(s.jsxs)("div",{className:"card card-body",children:[Object(s.jsxs)("h1",{style:{color:"#454545af"},className:"text-center mb-3",children:[Object(s.jsx)("i",{className:"fas fa-sign-in-alt"})," Login"]}),Object(s.jsx)(m,{errors:v,clearErrors:function(){T([])}}),Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"email",children:"Email"}),Object(s.jsx)("input",{type:"email",id:"email",name:"email",className:"form-control",placeholder:"Enter Email",onChange:function(e){return i(e.target.value)}})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)("input",{type:"password",id:"password",name:"password",className:"form-control",placeholder:"Enter Password",onChange:function(e){return b(e.target.value)}})]}),Object(s.jsx)("button",{style:{backgroundColor:"#74c69d",border:"none"},id:"login",type:"submit",className:"btn btn-primary btn-block",onClick:function(e){return function(e){e.preventDefault();var t={email:r,password:j};f()({method:"POST",data:t,headers:{"Access-Control-Allow-Origin":"*"},url:"http://localhost:3000/users/login"}).then((function(e){e.data?y(!0):T([{msg:"Invalid or missing credentials"}])}))}(e)},children:"Login"})]}),Object(s.jsxs)("p",{className:"lead mt-4",children:["No Account?"," ",Object(s.jsx)("a",{href:"/register",style:{color:"#74c69d"},children:"Register"})]})]})})})})})},y=function(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(""),l=Object(h.a)(i,2),c=l[0],j=l[1],b=Object(n.useState)(""),u=Object(h.a)(b,2),p=u[0],O=u[1],y=Object(n.useState)(""),g=Object(h.a)(y,2),x=g[0],v=g[1],T=Object(n.useState)([]),w=Object(h.a)(T,2),S=w[0],C=w[1],N=Object(n.useState)(!1),k=Object(h.a)(N,2),_=k[0],E=k[1];return _?Object(s.jsx)(o.a,{to:"/dashboard"}):Object(s.jsx)(d.a,{children:Object(s.jsx)("div",{className:"row mt-5",children:Object(s.jsx)("div",{className:"col-md-6 m-auto",children:Object(s.jsxs)("div",{className:"card card-body",children:[Object(s.jsxs)("h1",{style:{color:"#454545af"},className:"text-center mb-3",children:[Object(s.jsx)("i",{className:"fas fa-user-plus"})," Register"]}),Object(s.jsx)(m,{errors:S,clearErrors:function(){C([])}}),Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{for:"name",children:"Name"}),Object(s.jsx)("input",{type:"name",id:"name",name:"name",className:"form-control",placeholder:"Enter Name",onChange:function(e){return r(e.target.value)}})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"email",children:"Email"}),Object(s.jsx)("input",{type:"email",id:"email",name:"email",className:"form-control",placeholder:"Enter Email",onChange:function(e){return j(e.target.value)}})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)("input",{type:"password",id:"password",name:"password",className:"form-control",placeholder:"Create Password",onChange:function(e){return O(e.target.value)}})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(s.jsx)("input",{type:"password",id:"password2",name:"password2",className:"form-control",placeholder:"Confirm Password",onChange:function(e){return v(e.target.value)}})]}),Object(s.jsx)("button",{onClick:function(e){return function(e){e.preventDefault();var t={name:a,email:c,password:p,password2:x};f()({method:"POST",data:t,headers:{"Access-Control-Allow-Origin":"*"},withCredentials:!0,url:"https://dogstr-react.herokuapp.com/users/register"}).then((function(e){e.data.length>0?C(e.data):E(!0)})).catch((function(e){console.log(e)}))}(e)},style:{backgroundColor:"#74c69d",border:"none"},type:"submit",className:"btn btn-primary btn-block",children:"Register"})]}),Object(s.jsxs)("p",{className:"lead mt-4",children:["Have An Account?"," ",Object(s.jsx)("a",{style:{color:"#74c69d"},href:"/login",children:"Login"})]})]})})})})},g=a(105),x=a(60),v=Object(n.createContext)(null),T=a(34),w=["places"],S={width:"80vw",height:"70vh"},C={styles:[{featureType:"all",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"},{color:"#cee9de"},{saturation:"2"},{weight:"0.80"}]},{featureType:"poi.attraction",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#f5d6d6"}]},{featureType:"road.highway",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{hue:"#ff0000"},{visibility:"on"}]},{featureType:"road.highway.controlled_access",elementType:"labels.text",stylers:[{visibility:"simplified"}]},{featureType:"road.highway.controlled_access",elementType:"labels.icon",stylers:[{visibility:"on"},{hue:"#0064ff"},{gamma:"1.44"},{lightness:"-3"},{weight:"1.69"}]},{featureType:"road.arterial",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"road.arterial",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"road.local",elementType:"labels.text",stylers:[{visibility:"simplified"},{weight:"0.31"},{gamma:"1.43"},{lightness:"-5"},{saturation:"-22"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"all",stylers:[{visibility:"on"},{hue:"#ff0000"}]},{featureType:"transit.station.airport",elementType:"all",stylers:[{visibility:"simplified"},{hue:"#ff0045"}]},{featureType:"transit.station.bus",elementType:"all",stylers:[{visibility:"on"},{hue:"#00d1ff"}]},{featureType:"transit.station.bus",elementType:"labels.text",stylers:[{visibility:"simplified"}]},{featureType:"transit.station.rail",elementType:"all",stylers:[{visibility:"simplified"},{hue:"#00cbff"}]},{featureType:"transit.station.rail",elementType:"labels.text",stylers:[{visibility:"simplified"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{weight:"1.61"},{color:"#cde2e5"},{visibility:"on"}]}]},N=function(){var e=Object(n.useContext)(v),t=Object(h.a)(e,2),a=(t[0],t[1]),r=Object(n.useState)(),i=Object(h.a)(r,2),l=i[0],c=i[1],o=Object(n.useState)([]),d=Object(h.a)(o,2),b=d[0],u=d[1],m=Object(n.useState)(),p=Object(h.a)(m,2),O=p[0],y=p[1],N=Object(n.useRef)(),k=Object(n.useCallback)((function(e){N.current=e,I()}),[]),_=Object(n.useState)(null),E=Object(h.a)(_,2),P=E[0],A=E[1],D=Object(T.d)({googleMapsApiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_MAPS_API_KEY,libraries:w}),F=D.isLoaded,L=D.loadError,I=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};console.log(t),c(t,R(t))}))},R=function(e){var t={location:e,radius:"1000000",rankby:"distance",keyword:"dog park"};new window.google.maps.places.PlacesService(N.current).nearbySearch(t,W)},W=function(e,t){t==window.google.maps.places.PlacesServiceStatus.OK&&(u(e),console.log(e))},z=function(e){e.preventDefault(),(new window.google.maps.Geocoder).geocode({address:O},(function(e,t){if(t==window.google.maps.GeocoderStatus.OK){var a={lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()};c(a,R(a))}}))};return L?console.log("error loading maps"):F?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"search-form",children:Object(s.jsxs)(g.a,{onSubmit:function(e){return z(e)},inline:!0,children:[Object(s.jsx)(x.a,{onChange:function(e){return function(e){y(e.target.value)}(e)},type:"text",placeholder:"Search for dog parks",className:"mr-sm location-form"}),Object(s.jsx)(j.a,{onClick:function(e){return z(e)},variant:"success",children:"Search"})]})}),Object(s.jsx)("div",{id:"map",children:Object(s.jsxs)(T.a,{mapContainerStyle:S,zoom:10,center:l,onLoad:k,options:C,children:[b&&b.map((function(e){return Object(s.jsx)(T.c,{position:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},icon:{url:"/dog-cartoon.svg",scaledSize:new window.google.maps.Size(30,30),anchor:new window.google.maps.Point(15,0)},onClick:function(){A(e),function(e){var t={id:e.place_id,name:e.name,rating:e.rating},a={method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}};fetch("https://dogstr-react.herokuapp.com/parks/api/createpark",a).then((function(e){})).catch((function(e){console.log(e)}))}(e)}},"".concat(e.place_id))})),P?Object(s.jsx)(T.b,{position:{lat:P.geometry.location.lat(),lng:P.geometry.location.lng()},onCloseClick:function(){return A(null)},children:Object(s.jsxs)("div",{className:"text-center",children:[Object(s.jsx)("h2",{children:P.name}),Object(s.jsxs)("h3",{children:[P.rating," Stars"]}),Object(s.jsx)(j.a,{onClick:function(e){return function(e,t){e.preventDefault();var s={id:t.place_id,name:t.name};f()({method:"POST",data:s,url:"https://dogstr-react.herokuapp.com/threads/api/get_threads"}).then((function(e){e.data[0].noThreads?a([{park_id:e.data[0].park_id,name:e.data[0].name}]):a(e.data)})).catch((function(e){return console.log(e)}))}(e,P)},children:"Park Chat"})]})}):null]})})]}):"loading maps"},k=a(106),_=a(108),E=a(104),P=function(){return Object(s.jsxs)(k.a,{id:"nav",bg:"light",expand:"lg",children:[Object(s.jsx)(k.a.Brand,{href:"#home",children:"Dogstr"}),Object(s.jsx)("h1",{className:"dashboard-paw",children:Object(s.jsx)("i",{class:"fas fa-paw"})}),Object(s.jsx)(k.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsx)(k.a.Collapse,{id:"basic-navbar-nav",children:Object(s.jsx)(_.a,{className:"ml-auto",children:Object(s.jsx)(E.a,{title:Object(s.jsx)("i",{class:"fas fa-user-alt"}),id:"basic-nav-dropdown",children:Object(s.jsx)(E.a.Item,{href:"#action/3.4",children:Object(s.jsx)(j.a,{onClick:function(e){return function(e){e.preventDefault(),f()({method:"GET",headers:{"Access-Control-Allow-Origin":"*"},withCredentials:!0,url:"http://localhost:3000/users/logout"}).then((function(e){window.location.reload()}))}(e)},variant:"danger",children:"Logout"})})})})})]})},A=a(63),D=function(e){return Object(n.useEffect)((function(){document.getElementById("threads").scrollIntoView({behavior:"smooth"}),document.getElementById("yo").scrollIntoView({behavior:"smooth"})}),[e.threads]),e.threads[0]._doc?Object(s.jsxs)("div",{children:[e.threads.map((function(e){return Object(s.jsxs)("div",{className:"thread-block",children:[Object(s.jsxs)("h1",{className:"thread-user",children:[e._doc.user_name,":"]}),Object(s.jsx)("div",{className:"message-block",children:Object(s.jsx)("h1",{className:"message",children:e._doc.text})})]})})),Object(s.jsx)("div",{id:"yo"})]}):Object(s.jsx)("div",{id:"yo"})},F=a(103),L=function(){var e=Object(n.useContext)(v),t=Object(h.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(null),l=Object(h.a)(i,2),c=l[0],o=l[1],d=function(e){o(e.target.value)},b=function(e){e.preventDefault(),r(null)},u=function(e,t){e.preventDefault();var s=t[0].park_id||t[0]._doc.park_id;f()({method:"POST",data:{message:c,park_id:s,park_name:t[0].name},headers:{"Access-Control-Allow-Origin":"*"},withCredentials:!0,url:"https://dogstr-react.herokuapp.com/threads/api/submit_threads"}).then((function(e){a[0].name&&a.splice(0,1),r([].concat(Object(A.a)(a),[e.data[0]]))}))};return a&&a[0]._doc?Object(s.jsxs)("div",{id:"threads",children:[Object(s.jsxs)("div",{className:"threads-container",children:[Object(s.jsxs)("div",{className:"threads-header",children:[Object(s.jsxs)("h1",{style:{textAlign:"center",fontSize:"30px",color:"black",fontWeight:"200"},children:[a[0].park_name,Object(s.jsx)(j.a,{onClick:function(e){return b(e)},className:"thread-close",children:"x"})]}),Object(s.jsx)("i",{class:"fas fa-dog",style:{fontSize:"30px",display:"flex",justifyContent:"center"}})]}),Object(s.jsx)("div",{className:"threads-scrollable",children:Object(s.jsx)(D,{threads:a})})]}),Object(s.jsxs)(F.a,{children:[Object(s.jsx)(F.a.Prepend,{children:Object(s.jsx)(F.a.Text,{children:"Send a message"})}),Object(s.jsx)(x.a,{as:"textarea","aria-label":"With textarea",id:"userText",onChange:function(e){return d(e)}}),Object(s.jsx)(F.a.Append,{children:Object(s.jsx)(j.a,{id:"threadSend",onClick:function(e){return u(e,a)},children:"Send"})})]})]}):a?Object(s.jsxs)("div",{id:"threads",children:[Object(s.jsxs)("div",{className:"threads-container",children:[Object(s.jsxs)("div",{className:"threads-header",children:[Object(s.jsxs)("h1",{style:{textAlign:"center",fontSize:"30px",color:"black",fontWeight:"200"},children:[a[0].name,Object(s.jsx)(j.a,{className:"thread-close",onClick:function(e){return b(e)},children:"x"})]}),Object(s.jsx)("h1",{style:{textAlign:"center",fontSize:"30px",color:"black",fontWeight:"200"},children:"No chats! Write something fur-iendly!"})]}),Object(s.jsx)("div",{className:"threads-scrollable",children:Object(s.jsx)(D,{threads:a})})]}),Object(s.jsxs)(F.a,{children:[Object(s.jsx)(F.a.Prepend,{children:Object(s.jsx)(F.a.Text,{children:"Send a message"})}),Object(s.jsx)(x.a,{as:"textarea","aria-label":"With textarea",id:"userText",onChange:function(e){return d(e)}}),Object(s.jsx)(F.a.Append,{children:Object(s.jsx)(j.a,{id:"threadSend",onClick:function(e){return u(e,a)},children:"Send"})})]})]}):Object(s.jsx)("div",{})},I=function(){var e=Object(n.useState)(null),t=Object(h.a)(e,2),a=t[0],r=t[1];return f()({method:"GET",headers:{"Access-Control-Allow-Origin":"*"},withCredentials:!0,url:"https://dogstr-react.herokuapp.com/checkAuthenticated"}).then((function(e){e.data||(window.location.href="/login")})),Object(s.jsx)("div",{children:Object(s.jsxs)(v.Provider,{value:[a,r],children:[Object(s.jsx)(P,{}),Object(s.jsx)(N,{}),Object(s.jsx)(L,{})]})})};var R=function(){return Object(s.jsxs)(c.a,{children:[Object(s.jsx)(o.b,{exact:!0,path:"/",component:b}),Object(s.jsx)(o.b,{path:"/login",component:O}),Object(s.jsx)(o.b,{path:"/register",component:y}),Object(s.jsx)(o.b,{path:"/dashboard",component:I})]})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,109)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),s(e),n(e),r(e),i(e)}))};a(96);l.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(R,{})}),document.getElementById("root")),W()}},[[97,1,2]]]);
//# sourceMappingURL=main.65ea7079.chunk.js.map